/*! kerrywpowell.portfolio 2015-09-11 */
angular.module("Portfolio",["ngRoute"]).config(function($routeProvider){$routeProvider.when("/",{templateUrl:"tpl/about.html"}).when("/portfolio",{templateUrl:"tpl/about.html"}).when("/about",{templateUrl:"tpl/about.html"}).when("/work",{templateUrl:"tpl/work.html"}).when("/code",{templateUrl:"tpl/code.html"}).when("/hire",{templateUrl:"tpl/hire.html"})}).run(["$rootScope","$location",function($rootScope,$location){$rootScope.$on("$locationChangeSuccess",function(){$rootScope.path=$location.path()})}]);angular.module("Portfolio").controller("AccordionController",function($scope){$scope.showOrHide=function($event){if($event.target.classList.contains("expandable")){if($event.target.classList.contains("expanded")){$event.target.classList.remove("expanded")}else{$event.target.classList.add("expanded")}}}});angular.module("Portfolio").controller("CodeController",["$scope","$filter","CodeFactory",function($scope,$filter,CodeFactory){$scope.code;$scope.activeTab="";$scope.activeSubTab="";$scope.data=[{name:"Array Filter",id:"1",tabs:[{name:"Native JS",id:"1-1",tabs:[{name:"filter.js",src:"code/filter/filter.js",type:"code",id:"1-1-1"},{name:"native.js",src:"code/filter/native.js",type:"code",id:"1-1-2"},{name:"native.html",src:"code/filter/native.html",type:"code",id:"1-1-3"},{name:"Preview",src:"code/filter/native.html",type:"iframe",id:"1-1-4"}]},{name:"Angular JS",id:"1-2",tabs:[{name:"angular.js",src:"code/filter/angular.js",type:"code",id:"1-2-2"},{name:"angular.html",src:"code/filter/angular.html",type:"code",id:"1-2-3"},{name:"Preview",src:"code/filter/angular.html",type:"iframe",id:"1-2-4"}]},{name:"jQuery",id:"1-3",tabs:[{name:"filter.js",src:"code/filter/filter.js",type:"code",id:"1-3-1"},{name:"jquery.js",src:"code/filter/jquery.js",type:"code",id:"1-3-2"},{name:"jquery.html",src:"code/filter/jquery.html",type:"code",id:"1-3-3"},{name:"Preview",src:"code/filter/jquery.html",type:"iframe",id:"1-3-4"}]}]},{name:"Array Sorter",id:"2",tabs:[{name:"Native JS",id:"2-1",tabs:[{name:"sort.js",src:"code/sort/sort.js",type:"code",id:"2-1-1"},{name:"native.js",src:"code/sort/native.js",type:"code",id:"2-1-2"},{name:"native.html",src:"code/sort/native.html",type:"code",id:"2-1-3"},{name:"Preview",src:"code/sort/native.html",type:"iframe",id:"2-1-4"}]},{name:"Angular JS",id:"2-2",tabs:[{name:"angular.js",src:"code/sort/angular.js",type:"code",id:"2-2-2"},{name:"angular.html",src:"code/sort/angular.html",type:"code",id:"2-2-3"},{name:"Preview",src:"code/sort/angular.html",type:"iframe",id:"2-2-4"}]},{name:"jQuery",id:"2-3",tabs:[{name:"sort.js",src:"code/sort/sort.js",type:"code",id:"2-3-1"},{name:"jquery.js",src:"code/sort/jquery.js",type:"code",id:"2-3-2"},{name:"jquery.html",src:"code/sort/jquery.html",type:"code",id:"2-3-3"},{name:"Preview",src:"code/sort/jquery.html",type:"iframe",id:"2-3-4"}]}]},{name:"Income Tax Calculator",id:"3",tabs:[{name:"Native JS",id:"3-1",tabs:[{name:"native.js",src:"code/tax/native.js",type:"code",id:"3-1-1"},{name:"native.html",src:"code/tax/native.html",type:"code",id:"3-1-2"},{name:"Preview",src:"code/tax/native.html",type:"iframe",id:"3-1-3"}]},{name:"Angular JS",id:"3-2",tabs:[{name:"angular.js",src:"code/tax/angular.js",type:"code",id:"3-2-1"},{name:"angular.html",src:"code/tax/angular.html",type:"code",id:"3-2-2"},{name:"Preview",src:"code/tax/angular.html",type:"iframe",id:"3-2-3"}]},{name:"jQuery",id:"3-3",tabs:[{name:"jquery.js",src:"code/tax/jquery.js",type:"code",id:"3-3-1"},{name:"jquery.html",src:"code/tax/jquery.html",type:"code",id:"3-3-2"},{name:"Preview",src:"code/tax/jquery.html",type:"iframe",id:"3-3-3"}]}]},{name:"US Budget D3",id:"4",tabs:[{name:"colors.js",src:"code/usBudget/scripts/colors.js",type:"code",id:"4-1"},{name:"d3.js",src:"code/usBudget/scripts/d3.js",type:"code",id:"4-2"},{name:"GovDataController.js",src:"code/usBudget/scripts/GovDataController.js",type:"code",id:"4-3"},{name:"index.html",src:"code/usBudget/index.html",type:"code",id:"4-4"},{name:"Preview",src:"code/usBudget/index.html",type:"iframe",id:"4-5"}]},{name:"View this site on GitHub",href:"https://github.com/powellkerry/Portfolio",id:"5"}];$scope.updateActiveTab=function(tab){if(!tab){$('[data-target="#'+this.activeTab+'"]').trigger("click");if(this.activeSubTab){$('[data-target="#'+this.activeSubTab+'"]').trigger("click");var item=$filter("filter")($scope.data,{id:this.activeTab.substr(0,1)})[0];var tab=$filter("filter")(item.tabs,{id:this.activeTab})[0];var subTab=$filter("filter")(tab.tabs,{id:this.activeSubTab})[0];$scope.loadCode(subTab)}}else{if(tab.id.length==3){$scope.activeTab=tab.id}else{$scope.activeSubTab=tab.id}}};$scope.loadCode=function(tab){CodeFactory.loadCode(tab.src,function(result){tab.code=result})}}]);angular.module("Portfolio").controller("NavController",function($scope){$scope.showHideMenu=function($event){if(!$event.target.classList.contains("menu")){return}var target=$event.target,collapsed=target.getElementsByTagName("ul")[0].classList.contains("collapsed");if(collapsed){target.getElementsByTagName("ul")[0].classList.remove("collapsed");target.getElementsByTagName("ul")[0].classList.add("expanded")}else{target.getElementsByTagName("ul")[0].classList.remove("expanded");target.getElementsByTagName("ul")[0].classList.add("collapsed")}};document.onclick=function(event){var nav=document.getElementsByClassName("site-nav")[0].getElementsByClassName("menu")[0],isChildOfNav=false,currentEl=event.target;while(currentEl){if(currentEl.classList.contains("menu")){isChildOfNav=true;currentEl=null}else{currentEl=currentEl.parentElement}}if(nav.children[0].classList.contains("expanded")&&!isChildOfNav){nav.click()}if(!event.target.classList.contains("menu")&&isChildOfNav){setTimeout(function(){nav.click()},100)}}});angular.module("Portfolio").directive("lightBox",function(){return{restrict:"E",link:function(scope,element,attrs){var count=1,files=[];while(count<parseInt(attrs.count)){files.push(attrs.directory+"/"+count+".png");count++}scope.title=attrs.title;scope.selectedFile=files[0];scope.imageFiles=files;scope.open=function($event){$event.target.nextElementSibling.classList.add("visible")};scope.close=function(){document.querySelector(".modal.visible").classList.remove("visible")};scope.modalClick=function($event){if($event.target.classList.contains("modal")){scope.close()}};scope.move=function(direction){if(direction=="back"){var index=scope.imageFiles.indexOf(scope.selectedFile)-1;if(index<0){index=scope.imageFiles.length-1}scope.selectedFile=scope.imageFiles[index]}else{var index=scope.imageFiles.indexOf(scope.selectedFile)+1;if(index>scope.imageFiles.length-1){index=0}scope.selectedFile=scope.imageFiles[index]}}},templateUrl:"tpl/light-box.html"}});angular.module("Portfolio").directive("tabPanel",function(){return{restrict:"E",transclude:true,scope:{tabs:"=tabs",tabClickFn:"&tabClickFn"},link:function(scope,element,attrs){scope.side=attrs.hasOwnProperty("side");scope.activateTab=function($event,ref){scope.tabClickFn({$event:$event});if(!$event.target.classList.contains("active")){angular.forEach($event.target.parentElement.parentElement.querySelectorAll(".active"),function(el){el.classList.remove("active")});$event.target.classList.add("active");document.querySelector("[data-id="+ref+"]").classList.add("active")}}},templateUrl:"tpl/tab-panel.html"}});angular.module("Portfolio").factory("CodeFactory",function($http){return{loadCode:function(url,callback){$http.get(url).success(callback)}}});